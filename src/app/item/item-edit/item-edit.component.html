<main>


  <section>

    <div *ngIf="item">

      <h2 *ngIf="!id">Make a new item:</h2>
      <h2 *ngIf="id">Update item {{item.id}}:</h2>

      <form *ngIf="item" #editForm="ngForm" (ngSubmit)="save()">

        <div class="form-group" *ngIf="id">
          <label>Id</label>
          {{item.id}}
        </div>

        <div class="form-group">
          <label for="item-name">Item name: </label>
          <input id="item-name" [(ngModel)]="item.name" placeholder="name"
                 name="name" class="form-control" required #name="ngModel"
                 [ngClass]="{'is-invalid': name.touched && name.invalid,  'is-valid': name.touched && name.valid}">
        </div>

        <div *ngIf="name.errors" class="red-text">
          Name is required.
        </div>

        <div class="form-group">
          <label for="item-description">Item description: </label>
          <textarea id="item-description" [(ngModel)]="item.description" placeholder="description"
                 name="description" class="form-control" required maxLength="255" #description="ngModel"
                    type="text"
                 [ngClass]="{'is-invalid': description.touched && description.invalid,  'is-valid': description.touched && description.valid}">
          </textarea>
        </div>

        <div *ngIf="description.errors" class="red-text">
          Description is required.
        </div>
        <div *ngIf="item.description.length > 254" class="red-text">
          Description too long (255 chars max)
        </div>

        <div class="form-group">
          <label for="item-price">Price: </label>
          <input id="item-price" [(ngModel)]="item.price" placeholder="price"
                 name="price" class="form-control" required #price="ngModel" type="number" min="0.01"
                 [ngClass]="{'is-invalid': price.touched && price.invalid,  'is-valid': price.touched && price.valid}">
        </div>

        <div *ngIf="price.errors" class="red-text">
          Price is required.
        </div>

        <div *ngIf="price.errors?.['min']" class="red-text">
          Price should be minimum 0.01.
        </div>

        <div class="form-group">
          <label for="item-stock">Stock (amount): </label>
          <input id="item-stock" [(ngModel)]="item.amountOfStock" placeholder="amount in stock"
                 name="stock" class="form-control" required #stock="ngModel" type="number" min="0"
                 [ngClass]="{'is-invalid': stock.touched && stock.invalid,  'is-valid': stock.touched && stock.valid}">
        </div>

        <div *ngIf="stock.errors" class="red-text">
          Stock amount is required.
        </div>

        <div *ngIf="stock.errors?.['min']" class="red-text">
          Minimum 0 stock.
        </div>

        <button (click)="cancel()">Go back</button>

        <button type="submit" title="All fields required" [disabled]="!editForm.form.valid">Save</button>

      </form>

    </div>

  </section>
</main>
